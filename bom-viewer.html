<link rel="import" href="components/polymer-selector/polymer-selector.html" />


<polymer-element name="bom-viewer" attributes="bomData">
  <template>
    <table class="table table-condensed table-bordered">
      <caption>Parts</caption>
      <caption>Generated by : {{bomData.generatedBy}}</caption>
      <caption>Generation date : {{bomData.generationDate}}</caption>

      <thead>
        <tr>
          <template repeat="{{columnName, index in bomData.columns}}" >
            <th on-tap="{{onColumnHeaderTap}}" id="{{index}}" >
              {{columnName}} 
              <template if="{{sortInfos !== null }}">
                <!--using index to access data does not work !! -->
                <template if="{{index == 0}}">
                  <template if="{{sortInfos[0] == 1}}"> &#8743; </template>
                  <template if="{{sortInfos[0] == -1}}"> &#8744; </template>
                  <template if="{{sortInfos[0] == 0}}"> - </template>
                </template>

                 <template if="{{index == 1}}">
                  <template if="{{sortInfos[1] == 1}}"> &#8743; </template>
                  <template if="{{sortInfos[1] == -1}}"> &#8744; </template>
                  <template if="{{sortInfos[1] == 0 }}"> - </template>
                </template>

              </template>
            </th>
          </template>
        </tr>
      </thead>
      <tbody>
        <polymer-selector target="{{$.parts}}" selected="0"> </polymer-selector>
        <template repeat="{{part in bomData.data}}" id="parts">
          <tr on-tap="{{}}" class="item">
            <td>{{part[0]}} </td>
            <td> <input type="text" value="{{part[1]}}" /> </td>
            <td>{{part[2]}} </td>
            <td> <input type="checkbox" checked="{{part[3]}}" /> </td>
            <td> <input type="number" value="{{part[4]}}" /> </td>
            <td> <input type="checkbox" checked="{{part[5]}}" /> </td>
          </tr>
        </template>
        
      </tbody>
    </table>
  </template>
  <script src="bom-viewer.js"></script>
</polymer-element>

